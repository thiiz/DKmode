/* Dark Theme Extension - Intelligent Contrast-Aware Styles */

/* Color Palette */
:root {
  --dt-bg-primary: #0d1117;
  --dt-bg-secondary: #161b22;
  --dt-bg-elevated: #1f2428;
  --dt-text-primary: #e6edf3;
  --dt-text-secondary: #8b949e;
  --dt-text-muted: #6e7681;
  --dt-border: #30363d;
  --dt-accent: #58a6ff;
  --dt-accent-hover: #79c0ff;
}

/* Base Dark Theme - Variable Override Strategy */
.dark-theme-active {
  /* Override common CSS variables */
  --background: var(--dt-bg-primary) !important;
  --background-color: var(--dt-bg-primary) !important;
  --bg: var(--dt-bg-primary) !important;
  --bg-color: var(--dt-bg-primary) !important;
  --surface: var(--dt-bg-secondary) !important;
  --text: var(--dt-text-primary) !important;
  --text-color: var(--dt-text-primary) !important;
  --foreground: var(--dt-text-primary) !important;
  --border: var(--dt-border) !important;
  --border-color: var(--dt-border) !important;
  --primary: var(--dt-accent) !important;
  --accent: var(--dt-accent) !important;
  
  /* Override white/light backgrounds */
  --white: var(--dt-bg-primary) !important;
  --gray-50: var(--dt-bg-primary) !important;
  --gray-100: var(--dt-bg-secondary) !important;
  --gray-200: var(--dt-bg-elevated) !important;
  
  background-color: var(--dt-bg-primary) !important;
  color: var(--dt-text-primary) !important;
  color-scheme: dark !important;
}

/* Universal dark mode application */
.dark-theme-active * {
  border-color: var(--dt-border) !important;
}

/* Contrast Boost Mode - Enhanced readability */
.dark-theme-active[data-contrast-boost="true"] {
  --dt-text-primary: #ffffff;
  --dt-text-secondary: #c9d1d9;
}

.dark-theme-active[data-contrast-boost="true"] * {
  color: var(--dt-text-primary) !important;
}

/* Aggressive Dark Mode Application */
.dark-theme-active,
.dark-theme-active body {
  background-color: var(--dt-bg-primary) !important;
  color: var(--dt-text-primary) !important;
}

/* All major containers */
.dark-theme-active div,
.dark-theme-active main,
.dark-theme-active article,
.dark-theme-active section,
.dark-theme-active aside,
.dark-theme-active nav,
.dark-theme-active header,
.dark-theme-active footer {
  background-color: var(--dt-bg-primary) !important;
  color: var(--dt-text-primary) !important;
  border-color: var(--dt-border) !important;
}

/* Text elements */
.dark-theme-active p,
.dark-theme-active span,
.dark-theme-active li,
.dark-theme-active label {
  color: var(--dt-text-primary) !important;
}

/* Form Elements */
.dark-theme-active input:not([type="checkbox"]):not([type="radio"]),
.dark-theme-active textarea,
.dark-theme-active select {
  background-color: var(--dt-bg-elevated) !important;
  color: var(--dt-text-primary) !important;
  border-color: var(--dt-border) !important;
}

.dark-theme-active input::placeholder,
.dark-theme-active textarea::placeholder {
  color: var(--dt-text-muted) !important;
}

.dark-theme-active input:focus,
.dark-theme-active textarea:focus,
.dark-theme-active select:focus {
  outline-color: var(--dt-accent) !important;
  border-color: var(--dt-accent) !important;
}

/* Links */
.dark-theme-active a {
  color: var(--dt-accent) !important;
}

.dark-theme-active a:hover {
  color: var(--dt-accent-hover) !important;
}

/* Buttons */
.dark-theme-active button,
.dark-theme-active [role="button"] {
  background-color: var(--dt-bg-elevated) !important;
  color: var(--dt-text-primary) !important;
  border-color: var(--dt-border) !important;
}

.dark-theme-active button:hover {
  background-color: var(--dt-bg-secondary) !important;
}

/* Media Protection - Preserve Original Colors */
.dark-theme-active img,
.dark-theme-active video,
.dark-theme-active canvas,
.dark-theme-active picture {
  filter: none !important;
}

/* Code Blocks */
.dark-theme-active pre,
.dark-theme-active code {
  background-color: var(--dt-bg-elevated) !important;
  color: #7ee787 !important;
}

/* Tables */
.dark-theme-active table {
  border-color: var(--dt-border) !important;
}

.dark-theme-active th,
.dark-theme-active td {
  background-color: var(--dt-bg-secondary) !important;
  border-color: var(--dt-border) !important;
  color: var(--dt-text-primary) !important;
}

/* Headings */
.dark-theme-active h1,
.dark-theme-active h2,
.dark-theme-active h3,
.dark-theme-active h4,
.dark-theme-active h5,
.dark-theme-active h6 {
  color: var(--dt-text-primary) !important;
}

/* Blockquotes */
.dark-theme-active blockquote {
  background-color: var(--dt-bg-secondary) !important;
  border-left-color: var(--dt-accent) !important;
  color: var(--dt-text-secondary) !important;
}

/* Dividers */
.dark-theme-active hr {
  border-color: var(--dt-border) !important;
}

/* Text Selection */
.dark-theme-active ::selection {
  background-color: rgba(88, 166, 255, 0.3) !important;
  color: var(--dt-text-primary) !important;
}

/* Scrollbar */
.dark-theme-active ::-webkit-scrollbar {
  background-color: var(--dt-bg-primary) !important;
}

.dark-theme-active ::-webkit-scrollbar-thumb {
  background-color: var(--dt-border) !important;
  border-radius: 4px !important;
}

.dark-theme-active ::-webkit-scrollbar-thumb:hover {
  background-color: var(--dt-text-muted) !important;
}
