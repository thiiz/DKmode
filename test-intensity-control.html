<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Intensity Control Test - Dark Theme Extension</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .test-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 10px;
      margin-bottom: 30px;
    }

    .test-section {
      background: white;
      padding: 25px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .test-section h2 {
      color: #333;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
      margin-top: 0;
    }

    .test-item {
      padding: 15px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 5px;
      background: #fafafa;
    }

    .test-item h3 {
      margin-top: 0;
      color: #667eea;
    }

    .checklist {
      list-style: none;
      padding: 0;
    }

    .checklist li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }

    .checklist li:before {
      content: "‚òê ";
      color: #667eea;
      font-weight: bold;
      margin-right: 8px;
    }

    .content-samples {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .sample-card {
      border: 2px solid #667eea;
      border-radius: 8px;
      padding: 15px;
      background: white;
    }

    .sample-card h4 {
      margin-top: 0;
      color: #764ba2;
    }

    .text-sample {
      line-height: 1.6;
      color: #333;
    }

    .text-sample p {
      margin: 10px 0;
    }

    .text-sample a {
      color: #0066cc;
      text-decoration: none;
    }

    .text-sample a:hover {
      text-decoration: underline;
    }

    .text-sample a:visited {
      color: #551a8b;
    }

    .button-sample {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .button-sample button {
      padding: 10px 20px;
      border: 1px solid #667eea;
      background: #667eea;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .button-sample button:hover {
      background: #5568d3;
    }

    .button-sample button.secondary {
      background: white;
      color: #667eea;
    }

    .input-sample {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .input-sample input,
    .input-sample textarea,
    .input-sample select {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    .image-sample {
      text-align: center;
    }

    .image-sample img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }

    .video-sample {
      text-align: center;
    }

    .video-placeholder {
      width: 100%;
      height: 200px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
    }

    .intensity-indicator {
      background: #f0f0f0;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
      text-align: center;
    }

    .intensity-indicator h3 {
      margin: 0 0 10px 0;
      color: #667eea;
    }

    .intensity-value {
      font-size: 48px;
      font-weight: bold;
      color: #764ba2;
    }

    .instructions {
      background: #fff3cd;
      border: 1px solid #ffc107;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
    }

    .instructions h3 {
      margin-top: 0;
      color: #856404;
    }

    .expected-behavior {
      background: #d1ecf1;
      border: 1px solid #0c5460;
      padding: 15px;
      border-radius: 5px;
      margin-top: 15px;
    }

    .expected-behavior h4 {
      margin-top: 0;
      color: #0c5460;
    }

    .color-blocks {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    .color-block {
      height: 80px;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }

    .color-block.red {
      background: #e74c3c;
    }

    .color-block.blue {
      background: #3498db;
    }

    .color-block.green {
      background: #2ecc71;
    }

    .color-block.yellow {
      background: #f39c12;
      color: #333;
      text-shadow: none;
    }

    .color-block.purple {
      background: #9b59b6;
    }

    .color-block.orange {
      background: #e67e22;
    }
  </style>
</head>

<body>
  <div class="test-header">
    <h1>üé® Intensity Control Test Suite</h1>
    <p>Comprehensive testing for dark theme intensity adjustments (Requirements 8.1-8.6)</p>
  </div>

  <div class="instructions">
    <h3>üìã Test Instructions</h3>
    <ol>
      <li>Open the Dark Theme Extension popup</li>
      <li>Enable dark theme for this site</li>
      <li>Follow each test section below</li>
      <li>Adjust the intensity slider and observe changes</li>
      <li>Check off each test item as you verify it</li>
    </ol>
  </div>

  <!-- Test 1: Immediate Visual Changes -->
  <div class="test-section">
    <h2>Test 1: Immediate Visual Changes (Requirement 8.1, 8.2)</h2>
    <div class="test-item">
      <h3>Objective</h3>
      <p>Verify that adjusting the intensity slider produces immediate visual changes without page reload.</p>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Enable dark theme on this page</li>
        <li>Move intensity slider from current position to a different value</li>
        <li>Observe that background darkness changes immediately</li>
        <li>Observe that text brightness changes immediately</li>
        <li>Move slider back and forth multiple times</li>
        <li>Verify no delay or lag in visual updates</li>
        <li>Verify changes apply to all elements on the page</li>
      </ul>

      <div class="expected-behavior">
        <h4>Expected Behavior:</h4>
        <ul>
          <li>Visual changes should occur instantly (< 100ms)</li>
          <li>No page flicker or flash</li>
          <li>Smooth transition between intensity levels</li>
          <li>All page elements update simultaneously</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Test 2: Minimum Intensity -->
  <div class="test-section">
    <h2>Test 2: Minimum Intensity - Subtle Changes (Requirement 8.5)</h2>
    <div class="test-item">
      <h3>Objective</h3>
      <p>Verify that minimum intensity (0-20%) applies subtle color adjustments without extreme darkness.</p>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Set intensity slider to 0%</li>
        <li>Verify background is very slightly darkened (not pure black)</li>
        <li>Verify text is readable with minimal contrast change</li>
        <li>Set intensity to 10%</li>
        <li>Verify subtle increase in darkness</li>
        <li>Set intensity to 20%</li>
        <li>Verify gradual progression of darkness</li>
        <li>Confirm images and videos are barely affected</li>
      </ul>

      <div class="expected-behavior">
        <h4>Expected Behavior at Minimum Intensity:</h4>
        <ul>
          <li>Background: Very light gray/dark (not black)</li>
          <li>Text: Slightly lighter than original</li>
          <li>Images: Minimal to no brightness adjustment</li>
          <li>Overall: Subtle, comfortable viewing experience</li>
        </ul>
      </div>
    </div>

    <div class="content-samples">
      <div class="sample-card">
        <h4>Text Sample</h4>
        <div class="text-sample">
          <p>This is regular paragraph text. At minimum intensity, it should be slightly lighter but still comfortable
            to read.</p>
          <p><a href="#">This is a link</a> that should maintain good visibility.</p>
        </div>
      </div>

      <div class="sample-card">
        <h4>Color Blocks</h4>
        <div class="color-blocks">
          <div class="color-block red">Red</div>
          <div class="color-block blue">Blue</div>
          <div class="color-block green">Green</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Test 3: Maximum Intensity -->
  <div class="test-section">
    <h2>Test 3: Maximum Intensity - Full Inversion (Requirement 8.6)</h2>
    <div class="test-item">
      <h3>Objective</h3>
      <p>Verify that maximum intensity (80-100%) applies full color inversion with maximum contrast.</p>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Set intensity slider to 100%</li>
        <li>Verify background is very dark (near black)</li>
        <li>Verify text is very bright (near white)</li>
        <li>Verify high contrast between elements</li>
        <li>Set intensity to 90%</li>
        <li>Verify slightly less extreme contrast</li>
        <li>Set intensity to 80%</li>
        <li>Verify gradual reduction in intensity</li>
        <li>Confirm images are appropriately dimmed</li>
      </ul>

      <div class="expected-behavior">
        <h4>Expected Behavior at Maximum Intensity:</h4>
        <ul>
          <li>Background: Very dark, near black</li>
          <li>Text: Very bright, near white</li>
          <li>Images: Noticeably dimmed but still visible</li>
          <li>Overall: High contrast, true dark mode experience</li>
        </ul>
      </div>
    </div>

    <div class="content-samples">
      <div class="sample-card">
        <h4>Text Sample</h4>
        <div class="text-sample">
          <p>This is regular paragraph text. At maximum intensity, it should be very bright white on very dark
            background.</p>
          <p><a href="#">This is a link</a> that should be bright blue.</p>
          <p><strong>Bold text</strong> and <em>italic text</em> should maintain high contrast.</p>
        </div>
      </div>

      <div class="sample-card">
        <h4>Color Blocks</h4>
        <div class="color-blocks">
          <div class="color-block yellow">Yellow</div>
          <div class="color-block purple">Purple</div>
          <div class="color-block orange">Orange</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Test 4: Persistence After Reload -->
  <div class="test-section">
    <h2>Test 4: Intensity Persistence (Requirement 8.3, 8.4)</h2>
    <div class="test-item">
      <h3>Objective</h3>
      <p>Verify that intensity settings persist after page reload and are applied on page load.</p>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Set intensity to a specific value (e.g., 65%)</li>
        <li>Note the current visual appearance</li>
        <li>Reload the page (F5 or Ctrl+R)</li>
        <li>Verify dark theme is still enabled</li>
        <li>Verify intensity matches the previously set value</li>
        <li>Verify visual appearance matches before reload</li>
        <li>Change intensity to a different value (e.g., 30%)</li>
        <li>Reload the page again</li>
        <li>Verify new intensity value persists</li>
        <li>Close and reopen the browser tab</li>
        <li>Verify intensity still persists</li>
      </ul>

      <div class="expected-behavior">
        <h4>Expected Behavior:</h4>
        <ul>
          <li>Intensity value saved to chrome.storage.sync</li>
          <li>Saved intensity applied on page load</li>
          <li>No flash of wrong intensity before correction</li>
          <li>Consistent experience across page reloads</li>
        </ul>
      </div>
    </div>

    <div class="intensity-indicator">
      <h3>Current Intensity Reference</h3>
      <p>Before reloading, note the intensity value from the popup:</p>
      <div class="intensity-value" id="intensityDisplay">--</div>
      <p><small>Compare this value after reload</small></p>
    </div>
  </div>

  <!-- Test 5: Different Content Types -->
  <div class="test-section">
    <h2>Test 5: Intensity on Different Content Types (Requirements 8.1-8.6)</h2>

    <!-- Text Content -->
    <div class="test-item">
      <h3>5.1 Text Content</h3>
      <p>Test intensity effects on various text elements.</p>

      <div class="text-sample">
        <h4>Heading Level 4</h4>
        <p>Regular paragraph with <strong>bold text</strong>, <em>italic text</em>, and <u>underlined text</u>.</p>
        <p>Text with <a href="#">inline links</a> and <a href="#" style="color: red;">colored links</a>.</p>
        <blockquote style="border-left: 3px solid #667eea; padding-left: 15px; margin: 15px 0;">
          This is a blockquote. It should maintain proper contrast at all intensity levels.
        </blockquote>
        <code style="background: #f4f4f4; padding: 2px 6px; border-radius: 3px;">inline code</code>
        <pre style="background: #f4f4f4; padding: 10px; border-radius: 5px; overflow-x: auto;">function test() {
    console.log("Code block");
}</pre>
      </div>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Set intensity to minimum (0%) - verify text is readable</li>
        <li>Set intensity to medium (50%) - verify good contrast</li>
        <li>Set intensity to maximum (100%) - verify high contrast</li>
        <li>Verify all text styles (bold, italic, links) are visible at all levels</li>
      </ul>
    </div>

    <!-- Images -->
    <div class="test-item">
      <h3>5.2 Images</h3>
      <p>Test intensity effects on image brightness.</p>

      <div class="image-sample">
        <svg width="300" height="200" style="border: 1px solid #ddd; border-radius: 8px;">
          <rect width="300" height="200" fill="#667eea" />
          <circle cx="150" cy="100" r="50" fill="#764ba2" />
          <text x="150" y="110" text-anchor="middle" fill="white" font-size="20">Sample Image</text>
        </svg>
      </div>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Set intensity to minimum (0%) - images should be at full brightness</li>
        <li>Set intensity to medium (50%) - images should be slightly dimmed</li>
        <li>Set intensity to maximum (100%) - images should be noticeably dimmed</li>
        <li>Verify images remain visible and recognizable at all levels</li>
        <li>Verify images are not inverted (colors should look natural)</li>
      </ul>

      <div class="expected-behavior">
        <h4>Expected Image Behavior:</h4>
        <ul>
          <li>Minimum intensity: brightness ~100% (no dimming)</li>
          <li>Medium intensity: brightness ~90% (slight dimming)</li>
          <li>Maximum intensity: brightness ~80% (noticeable dimming)</li>
          <li>Images should never be inverted or distorted</li>
        </ul>
      </div>
    </div>

    <!-- Buttons and Inputs -->
    <div class="test-item">
      <h3>5.3 Interactive Elements</h3>
      <p>Test intensity effects on buttons, inputs, and form elements.</p>

      <div class="button-sample">
        <button>Primary Button</button>
        <button class="secondary">Secondary Button</button>
        <button disabled>Disabled Button</button>
      </div>

      <div class="input-sample" style="margin-top: 15px;">
        <input type="text" placeholder="Text input">
        <input type="email" placeholder="Email input">
        <textarea placeholder="Textarea" rows="3"></textarea>
        <select>
          <option>Select option 1</option>
          <option>Select option 2</option>
          <option>Select option 3</option>
        </select>
        <label style="display: flex; align-items: center; gap: 8px;">
          <input type="checkbox"> Checkbox option
        </label>
        <label style="display: flex; align-items: center; gap: 8px;">
          <input type="radio" name="radio"> Radio option
        </label>
      </div>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Set intensity to minimum - verify buttons/inputs are slightly darkened</li>
        <li>Set intensity to medium - verify good contrast for interaction</li>
        <li>Set intensity to maximum - verify high contrast, clear boundaries</li>
        <li>Verify placeholder text is visible at all levels</li>
        <li>Verify focus states are visible when clicking inputs</li>
        <li>Verify disabled states are distinguishable</li>
      </ul>
    </div>

    <!-- Video/Media Placeholder -->
    <div class="test-item">
      <h3>5.4 Video/Media Elements</h3>
      <p>Test intensity effects on video and media elements.</p>

      <div class="video-sample">
        <div class="video-placeholder">
          üé• Video Placeholder
        </div>
      </div>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Set intensity to minimum - video should be at full brightness</li>
        <li>Set intensity to medium - video should be slightly dimmed</li>
        <li>Set intensity to maximum - video should be noticeably dimmed</li>
        <li>Verify video content remains watchable at all levels</li>
        <li>Verify video controls are visible and usable</li>
      </ul>
    </div>
  </div>

  <!-- Test 6: Edge Cases -->
  <div class="test-section">
    <h2>Test 6: Edge Cases and Boundary Testing</h2>
    <div class="test-item">
      <h3>Objective</h3>
      <p>Test intensity behavior at boundary values and during rapid changes.</p>

      <h4>Test Steps:</h4>
      <ul class="checklist">
        <li>Set intensity to exactly 0% - verify minimal effect</li>
        <li>Set intensity to exactly 100% - verify maximum effect</li>
        <li>Rapidly move slider back and forth - verify no crashes or glitches</li>
        <li>Set intensity to 50%, reload page, verify it loads at 50%</li>
        <li>Change intensity multiple times quickly - verify final value persists</li>
        <li>Test with dark theme disabled - verify intensity slider has no effect</li>
        <li>Enable dark theme with intensity at 0% - verify subtle effect</li>
        <li>Test intensity changes while scrolling the page</li>
      </ul>

      <div class="expected-behavior">
        <h4>Expected Behavior:</h4>
        <ul>
          <li>No crashes or errors at boundary values</li>
          <li>Smooth performance during rapid changes</li>
          <li>Debounced saving prevents excessive storage writes</li>
          <li>Final intensity value always persists correctly</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Summary Checklist -->
  <div class="test-section">
    <h2>‚úÖ Final Verification Checklist</h2>
    <div class="test-item">
      <h3>Complete Test Summary</h3>
      <p>Verify all requirements have been tested:</p>

      <ul class="checklist">
        <li><strong>Requirement 8.1:</strong> Intensity slider updates CSS variables/filter values</li>
        <li><strong>Requirement 8.2:</strong> Content script applies new intensity immediately</li>
        <li><strong>Requirement 8.3:</strong> Intensity value saved to chrome.storage.sync</li>
        <li><strong>Requirement 8.4:</strong> Saved intensity applied on page load</li>
        <li><strong>Requirement 8.5:</strong> Minimum intensity applies subtle adjustments</li>
        <li><strong>Requirement 8.6:</strong> Maximum intensity applies full inversion with high contrast</li>
      </ul>

      <h3>Overall Test Results</h3>
      <ul class="checklist">
        <li>All intensity levels (0-100%) work correctly</li>
        <li>Visual changes are immediate and smooth</li>
        <li>Intensity persists across page reloads</li>
        <li>All content types (text, images, videos, inputs) respond appropriately</li>
        <li>No performance issues or visual glitches</li>
        <li>Edge cases handled gracefully</li>
      </ul>
    </div>
  </div>

  <script>
    // Display current intensity if available
    if (typeof chrome !== 'undefined' && chrome.storage) {
      chrome.storage.sync.get(['intensity'], (result) => {
        const display = document.getElementById('intensityDisplay');
        if (display && result.intensity !== undefined) {
          display.textContent = result.intensity + '%';
        }
      });
    }

    // Log page load for testing
    console.log('[Intensity Test] Page loaded at:', new Date().toISOString());
    console.log('[Intensity Test] Ready for testing');
  </script>
</body>

</html>